<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
	<style>

	</style>
</head>	
<body>
	<div id="myDiv">Click Me</div>
</body>
<script type="text/javascript">
	let db,request,version=1;
	request=indexedDB.open("admin",version);
	request.onerror=(event)=>{
		console.log(`Failed to open : ${event.target.errorCode}`);
	};
	request.onsuccess=(event)=>{
		db=event.target.result;
	};

	let user={
		username:"007",
		firstName:"James",
		lastName:"Bond",
		passward:"foo"
	};

	request.onupgradeneeded=(event)=>{
		const db=event.target.result;
		// 如果存在则删除当前 objectStore。测试的时候可以这样做
		// 但这样会在每次执行事件处理程序时删除已有数据
		if (db.objectStoreNames.contains("users")) {
			db.deleteObjectStore("users");
		}
		db.createObjectStore("users",{keyPath:"username"});
	}

	let transaction=db.transaction("users","readwrite");
	let store=transaction.objectStore("users");
	request=store.get("007");
	request.onerror=(event) => console.log("Did not get the object!");
	request.onsuccess=(event)=>console.log(event.target.result.firstName);




</script>
</html>